<html>
<body>

<div class="slidecontainer">
  Zoom <input id="slider" type="range" min="1" max="100" value="20" class="slider" id="myRange">
  <br>
  Force <input id="slider2" type="range" min="1" max="500" value="250" class="slider" id="myRange">
  <br>
  <p id="p1"></p>

</div>

</body>
</html>


<canvas id="myCanvas" width="1200" height="600" style="border:1px solid #000000;">

</canvas>
<head>
    <style>
        canvas {
            background-color: black;
        }
    </style>
</head>

<script type="text/javascript">

// JavaScript code for simulation
simulate=function(){	

	      // Get canvas element
	      const canvas = document.getElementById('myCanvas');
	      const ctx = canvas.getContext('2d');

  		  let x_ = [];
  		  let y_ = [];
  		  let xa_ = [];
  		  let ya_ = [];
	
  		  let cr_ = [];
    	  let cg_ = [];
  		  let cb_ = [];

  		  let s_ = [];

  		  let lastDate = Date.now()
  		  let frameCount = 0;


	      // Set ball radius
	      const ballRadius = 5;
  
  		  const speed = 0.004 / 10;
	
  		  const c = 1000; // number of elements
  
  		  const mapx = 1200, mapy = 600;

		  function init() {
			for (i = 0;i<c;i++) {
				x_[i] = Math.random() * mapx;
			    y_[i] = Math.random() * mapy;
			    xa_[i] = 0;
			    ya_[i] = 0;
			  
			    cr_[i] = Math.floor(Math.random() * 256);
			  	cg_[i] = Math.floor(Math.random() * 256);
			  	cb_[i] = Math.floor(Math.random() * 256);

			  	s_[i] = 1*Math.floor(Math.random() * 16);

  			}
		  }
  
    	  init();
  

	      // Function to draw the ball
	      function drawBall() {

	      	var sliderval = document.getElementById("slider").value
  			var scale = 1.0*sliderval/50.0; 

  			frameCount++;

  			var diff = Date.now() - lastDate;
  			lastDate = Date.now();

			document.getElementById("p1").innerHTML = diff + " ms";

			for (i=0;i<c;i++) {
	    		ctx.beginPath();
	      		ctx.arc((x_[i]-mapx/2)*scale+mapx/2, (y_[i]-mapy/2)*scale+mapy/2, s_[i]*scale, 0, Math.PI * 2);
			  ctx.fillStyle = "rgb("+cr_[i]+","+cg_[i]+","+cb_[i]+")";
	      		ctx.fill();
	     		ctx.closePath();
			}
	      }
	
	      // Function to update ball position
	      function updateBallPosition() {
	        // Clear canvas
	        ctx.clearRect(0, 0, canvas.width, canvas.height);
	
	        // Draw ball
	        drawBall();
	
			
			for (a=0;a<c;a++) {
			  for  (b=0;b<c;b++) {
				if (a == b) continue;
				if (a > b) continue; // don't do things twice
					let d = Math.sqrt(Math.pow(x_[a]-x_[b],2) + Math.pow(y_[a]-y_[b],2));

/*
					if (d <= ballRadius*2 + 5) {
						xa_[a] = 0;
						ya_[a] = 0;
						xa_[b] = 0;
						ya_[b] = 0;
					}
					else {
						*/
						xa_[a] = xa_[a] + (x_[b]-x_[a]) / d * s_[b]; 
						ya_[a] = ya_[a] + (y_[b]-y_[a]) / d * s_[b];

						xa_[b] = xa_[b] + (x_[a]-x_[b]) / d * s_[a];
						ya_[b] = ya_[b] + (y_[a]-y_[b]) / d * s_[a];
				//	}
			  }
			}
				
			var slider2val = document.getElementById("slider2").value
  			var speedscaler = 1.0*slider2val/250.0;

			  for (b=0;b<c;b++) {
				//xa_[b] = 0.1;
				x_[b] = x_[b] + xa_[b]*speed*speedscaler;
				y_[b] = y_[b] + ya_[b]*speed*speedscaler;
			  }
			
			/*
	        // Reverse direction if ball hits canvas edges
	        if (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {
	          dx = -dx;
	        }
	        if (y + dy > canvas.height - ballRadius || y + dy < ballRadius) {
	          dy = -dy;
	        }*/
			
		  }
	
	      // Call updateBallPosition function repeatedly for animation
	      setInterval(updateBallPosition, 10);
}

simulate();
document.activeElement.blur(); 
document.body.scrollTop = document.documentElement.scrollTop = 0;

</script>